
<html lang="zh">

<head>
    <meta charset="utf-8">
    <title>使用SDK进行开发</title>
    <meta name="description" content="ProductAI® provides state-of-the-art APIs for visual product recognition based on artificial intelligence.">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <style>
        @font-face {
            font-family: Consolas;
            font-style: normal;
            font-weight: 400;
            src: local('Consolas'), url(//cdn.malong.com/web/help/fonts/Consolas.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2212, U+2215
        }

        @font-face {
            font-family: 'Droid Sans';
            font-style: normal;
            font-weight: 400;
            src: local('Droid Sans Regular'), local('DroidSans-Regular'), url(./web/help/fonts/Droid%2BSans.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2212, U+2215
        }
    </style>
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://hm.baidu.com/hm.js?6733c4a4460763145f64601e0cdb020c"></script>
    <script>
        var _hmt = _hmt || [];
        ! function () {
            var e = document.createElement("script");
            e.src = "https://hm.baidu.com/hm.js?6733c4a4460763145f64601e0cdb020c";
            var t = document.getElementsByTagName("script")[0];
            t.parentNode.insertBefore(e, t)
        }()
    </script>
   <script>
   
$(function () {
    $(".mobile-bar .menu-button").on("click", function () {
        $(".mobile-content").toggleClass("open")
    }), $(".mobile-mask").on("click", function () {
        $(".mobile-content").removeClass("open")
    }), $(".main-menu-item.active > .main-menu-link").on("click", function (e) {
        $(this).closest(".main-menu-item").toggleClass("active"), e.preventDefault()
    }), $(".code-group").delegate(".code-group-title[data-lng]", "click", function () {
        var e = $(this),
            t = e.closest(".code-group"),
            i = e.attr("data-lng");
        e.siblings(".active").removeClass("active"), t.find(".highlight.active").removeClass("active"), e.addClass("active"), t.find('.highlight[data-lng="' + i + '"]').addClass("active")
    }), SmoothScroll('a[href*="#"]', {
        offset: 60
    }), FastClick.attach(document.body), $("#mainMenu .main-menu-item.current > .main-menu-link").on("click", function (e) {
        $(this).closest(".main-menu-item").addClass("active"), e.preventDefault()
    })
});
   </script>
</head>

<body class="page">
    <h1 class="hide">Productai</h1>
    <header id="header" class="page-hd">
        <div class="mobile-bar">
            <button class="menu-button" type="button">
                <i class="fa fa-list"></i>
            </button>
        </div>
        <a href="/zh" class="page-logo">
            <img src="http://developers.productai.com/images/logo.svg">
            <span class="slogan">开发者文档</span>
        </a>
        <ul class="page-nav">
            <li class="page-nav-item active">
                <a href="/zh/quick_start/" target="_self" class="page-nav-link">快速开始</a>
            </li>
            <li class="page-nav-item">
                <a href="/zh/reference/" target="_self" class="page-nav-link">参考文档</a>
            </li>
            <li class="page-nav-item">
                <a href="/zh/console/" target="_self" class="page-nav-link">控制台教程</a>
            </li>
            <li class="page-nav-item">
                <a href="/zh/faq/" target="_self" class="page-nav-link">FAQ</a>
            </li>
            <li class="page-nav-item">
                <a href="https://www.productai.cn/trial?from=developers.productai.cn" target="_blank" class="page-nav-link">免费试用</a>
            </li>
        </ul>
        <footer class="page-hd-ft">
            <a href="//console.productai.cn/" class="page-hd-trial" target="_blank">进入ProductAI </a>
            <a href="/en/" class="page-hd-global" target="_self">
                <i class="fa fa-globe dib"></i>
                <span class="dib">English</span>
            </a>
        </footer>
    </header>
    <aside class="mobile-content">
        <nav class="mobile-content-inner">
            <ul class="mobile-nav">
                <li class="mobile-nav-item active">
                    <a href="/zh/quick_start/" target="_self" class="mobile-nav-link">
                        <span>快速开始</span>
                    </a>
                    <ul class="mobile-nav">
                        <li class="mobile-nav-item">
                            <a href="/zh/quick_start/" class="mobile-nav-link">
                                <span>平台介绍</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item active">
                            <a href="/zh/quick_start/sdk" class="mobile-nav-link">
                                <span>使用SDK进行开发</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/quick_start/api" class="mobile-nav-link">
                                <span>使用API进行开发</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/quick_start/language" class="mobile-nav-link">
                                <span>语言支持</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/quick_start/region" class="mobile-nav-link">
                                <span>地区支持</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="mobile-nav-item">
                    <a href="/zh/reference/" target="_self" class="mobile-nav-link">
                        <span>参考文档</span>
                    </a>
                    <ul class="mobile-nav">
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/" class="mobile-nav-link">
                                <span>搜索基础</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/image_search" class="mobile-nav-link">
                                <span>图片搜索服务</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/product_search" class="mobile-nav-link">
                                <span>商品搜索服务</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/detect" class="mobile-nav-link">
                                <span>检测与定位服务</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/classify" class="mobile-nav-link">
                                <span>分析与标注服务</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/general_tagging" class="mobile-nav-link">
                                <span>通用标注服务</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/color" class="mobile-nav-link">
                                <span>色彩标注服务</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/fashion_analysis" class="mobile-nav-link">
                                <span>时尚分析服务</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/reference/batch" class="mobile-nav-link">
                                <span>批量图像数据处理</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="mobile-nav-item">
                    <a href="/zh/console/" target="_self" class="mobile-nav-link">
                        <span>控制台教程</span>
                    </a>
                    <ul class="mobile-nav">
                        <li class="mobile-nav-item">
                            <a href="/zh/console/" class="mobile-nav-link">
                                <span>以图搜图服务搭建教程</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/console/detect" class="mobile-nav-link">
                                <span>图像内物体检测教程</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/console/classify" class="mobile-nav-link">
                                <span>图像分析与标注教程</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/console/password" class="mobile-nav-link">
                                <span>如何重置密码</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/console/batch" class="mobile-nav-link">
                                <span>如何使用批量服务</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/console/access_key" class="mobile-nav-link">
                                <span>如何获取access_key_id</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="mobile-nav-item">
                    <a href="/zh/faq/" target="_self" class="mobile-nav-link">
                        <span>FAQ</span>
                    </a>
                    <ul class="mobile-nav">
                        <li class="mobile-nav-item">
                            <a href="/zh/faq/" class="mobile-nav-link">
                                <span>帐号相关</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/faq/data" class="mobile-nav-link">
                                <span>数据相关</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/faq/sdk" class="mobile-nav-link">
                                <span>SDK相关</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="/zh/faq/error" class="mobile-nav-link">
                                <span>错误相关</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="mobile-nav-item">
                    <a href="https://www.productai.cn/trial?from=developers.productai.cn" target="_blank" class="mobile-nav-link">
                        <span>免费试用</span>
                    </a>
                </li>
                <li class="mobile-nav-split"></li>
                <li class="mobile-nav-item">
                    <a href="//console.productai.cn/" class="mobile-nav-link" target="_blank">
                        <span>进入ProductAI</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="/en/" class="mobile-nav-link" target="_self">
                        <i class="fa fa-globe dib"></i>
                        <span class="dib">English</span>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="mobile-mask"></div>
    </aside>
    <aside class="sidebar">
        <div class="sidebar-inner">
            <ul class="main-menu" id="mainMenu">
                <li class="main-menu-item">
                    <a href="/zh/quick_start/" class="main-menu-link">平台介绍
                        <i class="fa fa-angle-left main-menu-link-icon"></i>
                    </a>
                </li>
                <li class="main-menu-item active">
                    <a href="/zh/quick_start/sdk" class="main-menu-link">使用SDK进行开发
                        <i class="fa fa-angle-left main-menu-link-icon"></i>
                    </a>
                    <ol class="main-menu">
                        <li class="main-menu-item main-menu-level-2">
                            <a class="main-menu-link" href="#Python-SDK">
                                <span class="main-menu-text">Python SDK</span>
                            </a>
                        </li>
                        <li class="main-menu-item main-menu-level-2">
                            <a class="main-menu-link" href="#PHP-SDK">
                                <span class="main-menu-text">PHP SDK</span>
                            </a>
                        </li>
                        <li class="main-menu-item main-menu-level-2">
                            <a class="main-menu-link" href="#Java-SDK">
                                <span class="main-menu-text">Java SDK</span>
                            </a>
                        </li>
                        <li class="main-menu-item main-menu-level-2">
                            <a class="main-menu-link" href="#Net-SDK">
                                <span class="main-menu-text">.Net SDK</span>
                            </a>
                        </li>
                        <li class="main-menu-item main-menu-level-2">
                            <a class="main-menu-link" href="#创建第一个搜索服务">
                                <span class="main-menu-text">创建第一个搜索服务</span>
                            </a>
                        </li>
                    </ol>
                </li>
                <li class="main-menu-item">
                    <a href="/zh/quick_start/api" class="main-menu-link">使用API进行开发
                        <i class="fa fa-angle-left main-menu-link-icon"></i>
                    </a>
                </li>
                <li class="main-menu-item">
                    <a href="/zh/quick_start/language" class="main-menu-link">语言支持
                        <i class="fa fa-angle-left main-menu-link-icon"></i>
                    </a>
                </li>
                <li class="main-menu-item">
                    <a href="/zh/quick_start/region" class="main-menu-link">地区支持
                        <i class="fa fa-angle-left main-menu-link-icon"></i>
                    </a>
                </li>
            </ul>
        </div>
    </aside>
    <div class="page-bd">
        <article class="post">
            <header class="post-hd">
                <h1>使用SDK进行开发</h1>
            </header>
            <div class="post-bd">
                <p>推荐通过<a href="https://github.com/MalongTech">SDK</a>使用ProductAI的功能。目前官方支持4种语言的SDK</p>
<h2 id="python-sdk">Python SDK</h2>
<p>安装请使用</p>
<pre><code>pip install productai
</code></pre><p>查看<a href="https://github.com/MalongTech/productai-python-sdk">源代码</a></p>
<blockquote>
<p>支持Python 2.7/3.5/3.6</p>
</blockquote>
<h2 id="php-sdk">PHP SDK</h2>
<p>安装请使用</p>
<pre><code>composer require malong/productai
</code></pre><p>查看<a href="https://github.com/MalongTech/productai-php-sdk">源代码</a>。</p>
<p>国内用户可切换到<a href="https://pkg.phpcomposer.com/">国内composer源</a>，再进行安装。</p>
<blockquote>
<p>支持PHP5.6及以上版本</p>
</blockquote>
<h2 id="java-sdk">Java SDK</h2>
<p>安装请下载<a href="https://github.com/MalongTech/productai-java-sdk/releases">JAR</a>包。在项目中引用该JAR包即可。</p>
<p>查看<a href="https://github.com/MalongTech/productai-java-sdk">源代码</a></p>
<blockquote>
<p>支持JDK1.6、1.8</p>
</blockquote>
<h2 id="-net-sdk">.Net SDK</h2>
<p>安装请使用</p>
<pre><code>Install-Package MalongTech.ProductAI.API
</code></pre><p>查看<a href="https://github.com/MalongTech/productai-csharp-sdk">源代码</a></p>
<blockquote>
<p>支持 .Net4.0及以上版本</p>
</blockquote>
<h2 id="-">创建第一个搜索服务</h2>
<p>ProductAI使用access_key_id和secret_key来识别客户，同时保护客户的调用不会被第三方滥用。下面的示例代码会创建一个使用客户 access_key_id和secret_key的客户端对象。查看access_key_id和secret_key方法请参考<a href="../console/access_key">这里</a>。</p>
<pre><code class="lang-python">from productai import Client

# 输入access_key_id和secret_key创建客户端
cli = Client(ACCESS_KEY_ID, SECRET_KEY)
</code></pre>
<pre><code class="lang-php">use ProductAI;

$product_ai = new ProductAI\API(ACCESS_KEY_ID, SECRET_KEY, &#39;zh-Hans&#39;);
</code></pre>
<pre><code class="lang-java">import cn.productai.api.core.*;
import cn.productai.api.core.enums.*;
import cn.productai.api.pai.entity.service.*;
import cn.productai.api.pai.entity.dataset.*;

// 设置API调用初始化参数
IProfile profile = new DefaultProfile();
profile.setAccessKeyId(ACCESS_KEY_ID);
profile.setSecretKey(SECRET_KEY);
profile.setVersion(&quot;1&quot;);
profile.setGlobalLanguage(LanguageType.Chinese);

IWebClient client = new DefaultProductAIClient(profile);
</code></pre>
<pre><code class="lang-csharp">using MalongTech.ProductAI.Core;

IProfile profile = new DefaultProfile
{
    Version = &quot;1&quot;,
    AccessKeyId = ACCESS_KEY_ID,
    SecretKey = SECRET_KEY
};
var client = new DefaultProductAIClient(profile);
</code></pre>
<p>ProductAI中的重要概念之一是数据集（ImageSet），数据集等同于传统数据库中的一个数据表。数据集中包含了数据（Image），等同于数据表中记录的概念。</p>
<pre><code class="lang-python"># 创建一个新的数据集
api = cli.get_image_set_creating_api()
resp = api.create_image_set(name=SET_NAME, description=SET_DESC)

# 获取数据集ID
from json import loads
image_set = loads(resp.content)
image_set_id = image_set[&#39;id&#39;]
</code></pre>
<pre><code class="lang-php">$result = $product_ai-&gt;createImageSet($name=SET_NAME, $description=SET_DESC);
$image_set_id = $result[&#39;id&#39;]
</code></pre>
<pre><code class="lang-java">// 设置数据集名称和描述参数
CreateDataSetRequest request = new CreateDataSetRequest(SET_NAME, SET_DESC);
request.setLanguage(LanguageType.Chinese);

// 调用API，获取调用结果
CreateDataSetResponse response = client.getResponse(request);
// 获取数据集ID
String image_set_id = response.getDataSetId();
</code></pre>
<pre><code class="lang-csharp">var request = new CreateDataSetRequest
{
    Name = SET_NAME,
    Description = SET_DESC
};

var response = client.GetResponse(request);
var dataSetId = response.DataSetId;
</code></pre>
<p>数据（Image）是被索引的对象。目前数据主要为图片。</p>
<pre><code class="lang-python"># 获取操作数据集的api
api = cli.get_image_set_api(IMAGE_SET_ID)
api.add_image(&#39;https://yyyy&#39;)
</code></pre>
<pre><code class="lang-php">$result = $product_ai-&gt;addImageToSet($image_set_id=IMAGE_SET_ID, &#39;https://yyyy&#39;);
</code></pre>
<pre><code class="lang-java">DataSetSingleAddByImageUrlRequest request = new DataSetSingleAddByImageUrlRequest(IMAGE_SET_ID);
request.setImageUrl(&quot;https://yyyy&quot;);
DataSetModifyResponse response = client.getResponse(request);
</code></pre>
<pre><code class="lang-csharp">var request = new DataSetSingleAddByImageUrlRequest(IMAGE_SET_ID)
{
    ImageUrl = &quot;https://yyyy&quot;
};
var response = client.GetResponse(request);
</code></pre>
<p>基于数据集（ImageSet）创建某个场景（Scenario）的服务（Service）</p>
<pre><code class="lang-python"># 获取操作数据集的api
api = cli.get_image_set_api(IMAGE_SET_ID)

# 通过一个数据集创建一个新的场景搜索服务
resp = api.create_service(name=&#39;NAME&#39;, scenario=&#39;fashion&#39;)

# 获取服务ID
from json import loads
service = loads(resp.content)
service_id = service[&#39;id&#39;]
</code></pre>
<pre><code class="lang-php">$result = $product_ai-&gt;createService($image_set_id=IMAGE_SET_ID, $name=&#39;NAME&#39;, $scenario=&#39;fashion&#39;);
$service_id = $result[&#39;id&#39;]
</code></pre>
<pre><code class="lang-java">// 设置搜索服务参数
CreateSearchServiceRequest request = new CreateSearchServiceRequest(IMAGE_SET_ID, &quot;NAME&quot;, SearchScenario.Fashion_V5_4);
request.setLanguage(LanguageType.Chinese);
// 调用API，获取调用结果
CreateSearchServiceResponse response = client.getResponse(request);
// 获取服务ID
String service_id = response.getServiceId();
</code></pre>
<pre><code class="lang-csharp">var request = new CreateSearchServiceRequest
{
    Name = &quot;NAME&quot;,
    Scenario = SearchScenario.Fashion_V5_4,
    DataSetId = IMAGE_SET_ID
};

var response = client.GetResponse(request);
var serviceId = response.ServiceId;
</code></pre>
<p>发起搜索请求到 <em>服务（Service）</em></p>
<pre><code class="lang-python"># 通过service_id获取一个搜索服务api
api = cli.get_image_search_api(SERVICE_ID)

# 在索引中搜索与image_url对应的图片视觉上相似的结果
resp = api.query(image_url = &#39;http://yyyy&#39;)

# 获取搜索结果
from json import loads
results = loads(resp.content)

for result in results[&#39;results&#39;]:
    url = result[&#39;url&#39;]
    score = results[&#39;score&#39;]
</code></pre>
<pre><code class="lang-php">$response = $product_ai-&gt;searchImage(&#39;search&#39;, SERVICE_ID, &#39;http://yyyy&#39;);

foreach ($response[&#39;results&#39;] as $value) {
    url = $value[&#39;url&#39;]
    score = $value[&#39;score&#39;]
}
</code></pre>
<pre><code class="lang-java">ImageSearchByImageUrlRequest request = new ImageSearchByImageUrlRequest(SERVICE_ID);
request.setUrl(&quot;http://yyyy&quot;);

ImageSearchResponse response = client.getResponse(request);
for (SearchResult r : response.getResults()) {
    url = r.getUrl();
    score = r.getScore();
}
</code></pre>
<pre><code class="lang-csharp">var request = new ImageSearchByImageUrlRequest(SERVICE_ID)
{
    Url = &quot;http://yyyy&quot;
};

var response = client.GetResponse(request);
foreach (var r in response.Results) {
    url = r.Url
    score = r.Score
}
</code></pre>

            </div>
        </article>
    </div>
    <script>
        window.PAGE_TYPE = "quick_start"
    </script>
</body>

</html>
